if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((i=>t.resolve(e()).then((()=>i))),(i=>t.resolve(e()).then((()=>{throw i}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";const t=(e,t)=>{const i=e.__vccOpts||e;for(const[a,n]of t)i[a]=n;return i};const i=t({data:()=>({user:[{url:"../../static/header_image/1.jpg",handler:"26e362c9-090b-4857-9b4f-751a2d5b0690"},{url:"../../static/header_image/2.jpg",handler:"c96101a2-5c53-4b55-bd84-29836424bae2"},{url:"../../static/header_image/3.jpg",handler:"e55e51ec-3e07-4d41-bc7e-faafd5d97c07"},{url:"../../static/header_image/4.jpg",handler:"d0895c88-73b6-49e9-b2fe-cdb54206e593"},{url:"../../static/header_image/5.jpg",handler:"9786c305-b06a-4a3b-b048-b08614e20aed"},{url:"../../static/header_image/6.jpg",handler:"1aef8c29-bc42-4e4b-97ef-3f478a7415e4"},{url:"../../static/header_image/1.jpg",handler:"5c24dacb-bcca-4f6d-8e1e-5cbfa1de9b1a"},{url:"../../static/header_image/2.jpg",handler:"d01839b0-3aef-4e3a-8d07-75ef07aaa187"},{url:"../../static/header_image/3.jpg",handler:"ef8c29dd-90c7-4159-a07a-5dd2ae29e312"},{url:"../../static/header_image/4.jpg",handler:"212ced76-ef64-4713-90e6-0f42375c1099"},{url:"../../static/header_image/5.jpg",handler:"e1b4af05-f607-4b74-9675-5865570339ed"},{url:"../../static/header_image/6.jpg",handler:"1eaf3000-8a2b-4e90-b3b3-3d5e8bf3e58b"}]}),methods:{goChatMain(e){uni.navigateTo({url:"/pages/chatMain/chatMain?handler="+e})}}},[["render",function(t,i,a,n,r,l){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"list-view"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.user,((t,i)=>(e.openBlock(),e.createElementBlock("view",{onClick:e=>l.goChatMain(t.handler),class:"list",style:{display:"flex","align-items":"center",padding:"5px 0 5px 10px"}},[e.createElementVNode("image",{src:t.url,style:{width:"45px",height:"45px","border-radius":"10px"}},null,8,["src"]),e.createElementVNode("view",{style:{display:"flex","flex-direction":"column","margin-left":"20px"}},[e.createElementVNode("text",{style:{"font-size":"20px",color:"#444444"}},e.toDisplayString(i),1),e.createElementVNode("text",{style:{color:"#8d8d8d","font-size":"13px"}},"more.............")])],8,["onClick"])))),256))])])}]]);const n="/static/mail.svg";const r=t({data:()=>({user:"",headerURL:""}),methods:{gotoPage(){uni.navigateTo({url:"/pages/login/login"})},LogOut(){uni.showModal({content:"确定要退出登录吗？",confirmColor:"red",cancelColor:"#007aff"}).then((e=>{!function(e,t,...i){uni.__log__?uni.__log__(e,t,...i):console[e].apply(console,[...i,t])}("log","at pages/mine/mine.vue:86",e)}))},scanQR(){uni.scanCode({onlyFromCamera:!0,success:e=>{uni.connectSocket({url:"ws://"+String(uni.getStorageSync("ip")).replace("http://")+"/websocket"}),uni.request({url:uni.getStorageSync("ip")+"/login/check_QR_code",data:{QRSessionID:e.result,token:uni.getStorageSync("token")},method:"GET",success:e=>{this.msg=e},fail(e){this.msg=a}})}})}},mounted(){uni.request({url:uni.getStorageSync("ip")+"/user/init_user_data",method:"POST",header:{Authorization:uni.getStorageSync("token")}}).then((e=>{this.user=e.data.data[0],this.headerURL=uni.getStorageSync("ip")+"/users_profile/"+this.user.header_img}))}},[["render",function(t,i,a,r,l,s){return e.openBlock(),e.createElementBlock("view",{style:{height:"100%","padding-top":"30px"}},[e.createElementVNode("view",{style:e.normalizeStyle([{display:"flex",width:"calc(100% - 60px)",padding:"20px 20px 50px 20px","margin-left":"10px","border-radius":"2.5px","align-items":"center","box-shadow":"0px 0px 5px #a8a8a8"},{backgroundColor:"女"==l.user.sex?"#ffddfb":"#b2bdff"}])},[e.createElementVNode("image",{src:l.headerURL,mode:"",style:{width:"90px",height:"90px","border-radius":"5px"}},null,8,["src"]),e.createElementVNode("view",{style:{height:"max-content","margin-left":"20px"}},[e.createElementVNode("view",{style:{display:"flex","align-items":"center","justify-content":"space-evenly"}},[e.createElementVNode("view",{class:"personal-info-group",style:{display:"flex","flex-direction":"column","align-items":"flex-start"}},[e.createElementVNode("view",{style:{display:"flex","align-items":"center"}},[e.createElementVNode("text",{style:{"font-size":"20px"}},e.toDisplayString(l.user.username),1),"女"==l.user.sex?(e.openBlock(),e.createElementBlock("image",{key:0,src:"/static/female.svg",style:{width:"20px",height:"20px","margin-left":"5px"}})):(e.openBlock(),e.createElementBlock("image",{key:1,src:"/static/male.svg",style:{width:"20px",height:"20px","margin-left":"5px"}}))]),e.createElementVNode("text",{style:{"font-size":"15px"}},e.toDisplayString(l.user.department),1),e.createElementVNode("text",{style:{"font-size":"15px"}},e.toDisplayString(l.user.second_department),1),e.createElementVNode("text",{style:{"font-size":"15px"}},e.toDisplayString(l.user.level),1)]),e.createElementVNode("text",{style:{"font-size":"15px","margin-left":"20px"}},e.toDisplayString(l.user.job),1),e.createElementVNode("image",{src:"/static/scan-code.svg",onClick:i[0]||(i[0]=e=>s.scanQR(t.token)),style:{width:"30px",height:"30px","margin-left":"60px"}})])])],4),e.createElementVNode("view",{style:{width:"calc(100% - 50px)","margin-left":"20px",padding:"3px 5px","background-color":"#fdfdfd","margin-top":"0px","text-align":"center",transform:"translateY(-30px)","border-radius":"5px","box-shadow":"0px 0px 5px #a8a8a8"}},[e.createElementVNode("view",{style:{"font-size":"15px",padding:"10px 10px",display:"flex","justify-content":"start","align-items":"center","background-color":"#f4f4f4",margin:"2px 0 5px 0"}},[e.createElementVNode("image",{src:n,style:{width:"20px",height:"30px"}}),e.createElementVNode("text",{style:{"margin-left":"10px"}},e.toDisplayString(l.user.email)+"@system.rmg",1)]),e.createElementVNode("view",{style:{"font-size":"15px",padding:"10px 10px",display:"flex","justify-content":"start","align-items":"center","background-color":"#f4f4f4",margin:"0px 0 5px 0"}},[e.createElementVNode("image",{src:"/static/phone.svg",style:{width:"20px",height:"30px"}}),e.createElementVNode("text",{style:{"margin-left":"10px"}},e.toDisplayString(l.user.phone_number),1)]),e.createElementVNode("view",{style:{"font-size":"15px",padding:"10px 10px",display:"flex","justify-content":"start","align-items":"center","background-color":"#f4f4f4",margin:"0px 0 5px 0"}},[e.createElementVNode("image",{src:"/static/config.svg",style:{width:"25px",height:"25px","margin-left":"10px"},mode:""}),e.createElementVNode("text",{style:{"margin-left":"10px"}},"设置")])]),e.createElementVNode("view",{style:{"background-color":"#ee4f52",width:"calc(100% - 40px)","margin-left":"10px","margin-top":"10px","border-radius":"5px",padding:"10px","text-align":"center",color:"#ececec","font-weight":"bold","box-shadow":"0px 0px 5px #6c6c6c"},onClick:i[1]||(i[1]=e=>s.LogOut())},[e.createElementVNode("text",null,"退出登录")])])}]]);const l=t({data:()=>({pic:"",password:"",username:"",captcha:"",useLAN:!1,server_ip:[null,null,null,null,null],server_ip_element:[],loginFlag:[!1,!1,!1]}),methods:{login(){uni.request({url:uni.getStorageSync("ip")+"/login/login",header:{"Content-Type":"application/x-www-form-urlencoded"},data:{Username:this.username,Password:this.password,Captcha:this.captcha},method:"POST"}).then((e=>{""!=this.password&&""!=this.username&&""!=this.captcha?(200==e.data.code&&(uni.showToast({icon:"none",title:e.data.msg}),uni.switchTab({url:"/pages/index/index"}),uni.setStorageSync("token",e.data.data)),403==e.data.code&&uni.showToast({icon:"none",title:e.data.msg})):(""==this.password&&(this.loginFlag[1]=!0),""==this.username&&(this.loginFlag[0]=!0),""==this.captcha&&(this.loginFlag[2]=!0))}))},getCaptcha(){uni.request({url:uni.getStorageSync("ip")+"/login/captcha",method:"GET",responseType:"arraybuffer"}).then((e=>{this.pic="data:image/png;base64,"+uni.arrayBufferToBase64(e.data)}))},setLAN(){if(null!=this.server_ip[0]&&null!=this.server_ip[1]&&null!=this.server_ip[2]&&null!=this.server_ip[3]&&null!=this.server_ip[4]){let e=!1;this.server_ip.forEach(((t,i)=>{e=i<=3?!(this.server_ip[i]>255||null==this.server_ip[i]):!(this.server_ip[i]>66535||null==this.server_ip[i])})),0==e?uni.showToast({icon:"none",title:"IP地址有误!"}):0!=this.server_ip.length?(uni.setStorageSync("wsIP","ws://"+this.server_ip[0]+"."+this.server_ip[1]+"."+this.server_ip[2]+"."+this.server_ip[3]+":"+this.server_ip[4]),uni.setStorageSync("ip","http://"+this.server_ip[0]+"."+this.server_ip[1]+"."+this.server_ip[2]+"."+this.server_ip[3]+":"+this.server_ip[4]),this.useLAN=!1):uni.removeStorageSync("ip")}}},mounted(){this.getCaptcha(),this.loginElement=document.querySelectorAll(".underline"),this.server_ip_element=document.querySelectorAll(".server-ip"),uni.getStorageSync("ip")&&"http://...:"!=uni.getStorageSync("ip")||uni.setStorageSync("ip","http://127.0.0.1:8080");let e=uni.getStorageSync("ip"),t=String(e).replace("http://","").replace(":",".").split(".");this.server_ip[0]=t[0],this.server_ip[1]=t[1],this.server_ip[2]=t[2],this.server_ip[3]=t[3],this.server_ip[4]=t[4]}},[["render",function(t,i,a,r,l,s){return e.openBlock(),e.createElementBlock("view",{class:"login-container"},[e.createElementVNode("view",{class:"login-title"},[e.createElementVNode("text",null,"资产管理系统")]),e.createElementVNode("view",{style:{width:"80%",display:"flex","flex-direction":"column","justify-content":"space-between"}},[e.createElementVNode("view",{class:"group"},[e.withDirectives(e.createElementVNode("input",{class:"login-input",type:"text",id:"username",name:"username","onUpdate:modelValue":i[0]||(i[0]=e=>l.username=e),placeholder:"请输入用户名"},null,512),[[e.vModelText,l.username]]),e.createElementVNode("image",{src:"/static/user.svg"}),this.loginFlag[0]?(e.openBlock(),e.createElementBlock("span",{key:0,class:"underline"})):e.createCommentVNode("",!0)]),e.createElementVNode("view",{class:"group"},[e.withDirectives(e.createElementVNode("input",{class:"login-input",type:"safe-password",id:"password",name:"password","onUpdate:modelValue":i[1]||(i[1]=e=>l.password=e),placeholder:"请输入密码"},null,512),[[e.vModelText,l.password]]),e.createElementVNode("image",{src:"/static/lock.svg"}),this.loginFlag[1]?(e.openBlock(),e.createElementBlock("span",{key:0,class:"underline"})):e.createCommentVNode("",!0)]),e.createElementVNode("view",{style:{width:"100%",display:"flex","align-items":"center"}},[e.createElementVNode("view",{class:"group",style:{width:"calc(100% - 200rpx)"}},[e.withDirectives(e.createElementVNode("input",{class:"login-input",type:"text",id:"captcha",name:"captcha","onUpdate:modelValue":i[2]||(i[2]=e=>l.captcha=e),placeholder:"请输入验证码"},null,512),[[e.vModelText,l.captcha]]),e.createElementVNode("image",{src:n}),this.loginFlag[2]?(e.openBlock(),e.createElementBlock("span",{key:0,class:"underline"})):e.createCommentVNode("",!0)]),e.createElementVNode("image",{onClick:i[3]||(i[3]=(...e)=>s.getCaptcha&&s.getCaptcha(...e)),mode:"aspectFit",style:{width:"200rpx",height:"42.5px"},src:this.pic,alt:""},null,8,["src"])]),e.createElementVNode("view",{class:"submit-button-group"},[e.createElementVNode("view",{style:{width:"200px",display:"flex","margin-bottom":"10px"}},[e.createElementVNode("button",{style:{"font-size":"15px",width:"200px",height:"35px",display:"flex","align-items":"center","justify-content":"center"},type:"primary",onClick:i[4]||(i[4]=(...e)=>s.login&&s.login(...e))},"登录")]),e.createElementVNode("button",{style:{"font-size":"12px",width:"150px",height:"30px","line-height":"30px",border:"none",color:"#949494","margin-bottom":"10px"},type:"primary",plain:"true",onClick:i[5]||(i[5]=()=>{this.useLAN=!0})},"使用内部网络")])]),e.createElementVNode("view",{style:e.normalizeStyle([{width:"75%",transition:"all 0.2s",border:"1px solid #9d9d9d",padding:"10px 20px","border-radius":"5px",color:"#6c6c6c","margin-top":"5px",overflow:"hidden"},{opacity:0==l.useLAN?"0":"1"}])},[e.createElementVNode("p",{style:{"font-size":"13px",margin:"10px 0 0px 0"}},"服务器IP地址:"),e.createElementVNode("view",{style:{display:"flex","margin-top":"10px",overflow:"hidden"},class:"config-ip"},[e.withDirectives(e.createElementVNode("input",{maxlength:"3",class:"server-ip",inputmode:"numeric","onUpdate:modelValue":i[6]||(i[6]=e=>l.server_ip[0]=e)},null,512),[[e.vModelText,l.server_ip[0]]]),e.createElementVNode("span",null,"."),e.withDirectives(e.createElementVNode("input",{maxlength:"3",class:"server-ip",inputmode:"numeric","onUpdate:modelValue":i[7]||(i[7]=e=>l.server_ip[1]=e)},null,512),[[e.vModelText,l.server_ip[1]]]),e.createElementVNode("span",null,"."),e.withDirectives(e.createElementVNode("input",{maxlength:"3",class:"server-ip",inputmode:"numeric","onUpdate:modelValue":i[8]||(i[8]=e=>l.server_ip[2]=e)},null,512),[[e.vModelText,l.server_ip[2]]]),e.createElementVNode("span",null,"."),e.withDirectives(e.createElementVNode("input",{maxlength:"3",class:"server-ip",inputmode:"numeric","onUpdate:modelValue":i[9]||(i[9]=e=>l.server_ip[3]=e)},null,512),[[e.vModelText,l.server_ip[3]]]),e.createElementVNode("span",null,":"),e.withDirectives(e.createElementVNode("input",{maxlength:"5",style:{"background-color":"#d9d9d9",width:"200px",height:"100%"},inputmode:"numeric","onUpdate:modelValue":i[10]||(i[10]=e=>l.server_ip[4]=e)},null,512),[[e.vModelText,l.server_ip[4]]])]),e.createElementVNode("view",{style:{display:"flex","margin-top":"20px",width:"100%","justify-content":"space-between"}},[e.createElementVNode("button",{type:"primary",plain:"true",size:"mini",style:{"font-size":"12px",width:"80px",height:"30px","margin-right":"10px","text-align":"center"},onClick:i[11]||(i[11]=(...e)=>s.setLAN&&s.setLAN(...e))},"保存"),e.createElementVNode("button",{size:"mini",type:"default",plain:"true",style:{"font-size":"12px",width:"80px",height:"30px"},onClick:i[12]||(i[12]=()=>{this.useLAN=!1,this.server_ip=[null,null,null,null,null]})},"取消")])],4)])}]]);const s=t({data:()=>({}),methods:{backToMain(){uni.navigateBack()}},onLoad(e){uni.connectSocket({url:uni.getStorageSync("wsIP")+"/communicate"})}},[["render",function(t,i,a,n,r,l){return e.openBlock(),e.createElementBlock("view",{class:"container",style:{width:"100%",height:"100%"}},[e.createElementVNode("view",{class:"title-bar"},[e.createElementVNode("text",null,"张三"),e.createElementVNode("image",{onClick:i[0]||(i[0]=e=>l.backToMain()),src:"/static/left.svg",style:{width:"25px",height:"50px",position:"absolute",left:"10px"}})]),e.createElementVNode("scroll-view",{"scroll-y":"true",style:{"background-color":"#eeeeee"},class:"chat-main"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(20,(t=>e.createElementVNode("view",{class:"chat-text",style:e.normalizeStyle({"margin-left":t%2==0?"30px":"120px",backgroundColor:t%2==0?"#f8f8f8":"#78c5f8"})},[e.createElementVNode("text",{style:{padding:"5px 15px"}},e.toDisplayString(t),1),e.createElementVNode("view",{class:"chat-text-block",style:e.normalizeStyle({left:t%2==0?"-8px":"",right:t%2!=0?"-8px":"",backgroundColor:t%2==0?"#f8f8f8":"#78c5f8"})},null,4)],4))),64))]),e.createElementVNode("view",{class:"","adjust-position":"true",style:{height:"60px",display:"flex","align-items":"center","justify-content":"space-evenly"}},[e.createElementVNode("textarea",{type:"text",value:"123123",style:{"line-height":"40px",height:"40px","background-color":"#f4f4f4",width:"80%","box-shadow":"0px 0px 1px 1px #e1e1e1 inset",padding:"0 10px","border-radius":"5px"}}),e.createElementVNode("image",{src:"/static/add-one.svg",mode:"",style:{width:"30px",height:"30px"}})])])}],["__scopeId","data-v-a5089c36"]]);__definePage("pages/index/index",i),__definePage("pages/mine/mine",r),__definePage("pages/login/login",l),__definePage("pages/chatMain/chatMain",s);const o={};const{app:c,Vuex:p,Pinia:d}={app:e.createVueApp(o)};uni.Vuex=p,uni.Pinia=d,c.provide("__globalStyles",__uniConfig.styles),c._component.mpType="app",c._component.render=()=>{},c.mount("#app")}(Vue);
